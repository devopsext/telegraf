[agent]
  interval = "10s"
  round_interval = false

  metric_batch_size = 1000
  metric_buffer_limit = 100000
  collection_jitter = "0s"
  flush_interval = "250ms"
  flush_jitter = "0s"
  precision = ""

  debug = false
  quiet = false
  logfile = ""

  hostname = ""
  omit_hostname = true

#[[inputs.internal]]

[[inputs.docker_cnt_logs]]
  ## Interval to gather data from docker sock.
  ## the longer the interval the fewer request is made towards docker API (less CPU utilization on dockerd).
  ## On the other hand, this increase the delay between producing logs and delivering it. Reasonable trade off
  ## should be chosen. Default value is 2000 ms.
  log_gather_interval = "500ms"

  # Docker Endpoint
  #  To use unix, set endpoint = "unix:///var/run/docker.sock" (/var/run/docker.sock is default mount path)
  #  To use TCP, set endpoint = "tcp://[ip]:[port]"
  #  To use environment variables (ie, docker-machine), set endpoint = "ENV"
  endpoint = "unix:///var/run/docker.sock"

  ## Optional TLS Config
  # tls_ca = "/etc/telegraf/ca.pem"
  # tls_cert = "/etc/telegraf/cert.pem"
  # tls_key = "/etc/telegraf/key.pem"

  ## Use TLS but skip chain & host verification
  # insecure_skip_verify = false

  ## When true, container logs are read from the beginning; otherwise
  ## reading begins since saved offset.
  from_beginning = true

  #############################################################################
  # Log streaming settings

  # Set initial chunk size (length of []byte buffer to read from docker socket)
  # If not set, default value of 'defaultInitialChunkSize = 10000' will be used
  initial_chunk_size = 10000 # 10K symbols

  # Set max chunk size (length of []byte buffer to read from docker socket)
  # If not set, default value of 'defaultMaxChunkSize = 50000' will be used
  # buffer can grow in capacity adjusting to volume of data received from docker sock
  max_chunk_size = 50000 # 50K symbols

  # Offset flush interval. How often the offset pointer (see below) in the
  # log stream is flashed to file.Offset pointer represents the unix time stamp
  # for last message read from log stream (default - 3 sec)
  # offset_flush = "3s"

  # Offset storage path (mandatory)
  #offset_storage_path = "/var/run/collector_offset"
  #offset_storage_path = "./collector_offset"
  offset_storage_path = "/Users/ilya.prudnikov/DevNS/src/github.com/influxdata/telegraf/collector_offset"

  # Shutdown telegraf if all log streaming containers stopped/killed, default - false
  # shutdown_when_processed = false
  #shutdown_when_processed = false
  [inputs.docker_cnt_logs.when_static_container_processed]
    #execute_cmd=["s6-svc", "-d", "/services/service/run"]
    #execute_cmd=["/usr/bin/whoami"]
    execute_cmd=["sleep", "9"]

  #Static settings per container (specify as many sections as needed)

#  [[inputs.docker_cnt_logs.container]]
#    # Set container id (long or short from), or container name
#    # to stream logs from, this attribute is mandatory
#    #id = "f469ccc5f37e"
#    #id = "b462610bd230478d5ee9ec20dd11e66942c42990026ff086f03a4c0a3b04a9c2"
#    id = "e98faa59e9ab5a3ee9b09494c4c257657dcecd791e98cc13fb41f0b8efedc0a9"
#
#    ## Override common settings
#    ## input interval (specified or inherited from agent section)
#
#    log_gather_interval = "100ms"
#
#    ## Initial chunk size
#    initial_chunk_size = 200000 # 2 Mb
#
#    ## Max chunk size
#    max_chunk_size = 10000000 # 6 Mb
#
#    #Set additional tags that will be tagged to the stream from the current container.
#    #tags = [
#    #    "tag1=value1",
#    #    "tag2=value2"
#    #]

 [[inputs.docker_cnt_logs.container]]
    #id = "e98faa59e9ab5a3ee9b09494c4c257657dcecd791e98cc13fb41f0b8efedc0a9"
    name = "quirky_fermi"
    interval = "600ms"

#  [inputs.docker_cnt_logs.tags]
#    service = "collector"

[[outputs.file]]
  files = ["stdout"]
  data_format = "influx"